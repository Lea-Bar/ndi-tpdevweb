---
import PollutionBall from "../components/OceanBall.astro";
import LifeBar from "../components/lifeBar.astro";
import { oceans } from "../data/oceans.js"; // Liste des océans
import { player } from "../data/player.js"; 
import QuestionModal from "../components/QuestionModal.astro";


// Coordonnées pour chaque océan (index correspond à l'océan dans le tableau)
const positions = [
  { x: 50, y: 50 },
  { x: 200, y: 150 },
  { x: 400, y: 300 },
  { x: 600, y: 450 },
  { x: 800, y: 500 },
];

---

<html lang="fr">
  <head>
    <title>Carte de Pollution</title>
    <style>
      #game-container {
        position: relative;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
      }

      #gamecanvas {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
      }

      .pollution-ball-container {
        position: absolute;
        z-index: 2; /* Au-dessus du canevas */
        transform: translate(0, -10%); /* Centrer autour des coordonnées */
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/js/game.js" type="module"></script>
    <link href="/css/game.css" rel="stylesheet">
  </head>
  <body>
    <div id="game-container">
      <canvas id="gamecanvas"></canvas>
      <QuestionModal></QuestionModal>
      {oceans.map((ocean, index) => {
        const pos = positions[index];
        return (
          <div
            class="pollution-ball-container"
            style={`left: ${pos.x}px; top: ${pos.y}px;`}
          >
            <PollutionBall ocean={ocean} />
          </div>
        );
      })}
    </div>
    <LifeBar life={player.life} maxLife={player.maxLife} />
  </body>
</html>
